{"version":3,"file":"hereMapRelocation.1c36a37688739f25ff7a.js","mappings":"gdAAA,IA+CQA,EAjCAC,EAEAC,EAhBFC,EAASC,QAAQC,IAAIC,iBAIrBC,EAASC,KAAKC,UA2CZT,EADcU,mBAAmBC,OAAOC,SAASC,QAC7Bb,MAAM,IAAIc,OAAO,gCAC9Bd,EAAM,KACVA,EAAM,IAnCTC,EAHW,IAAIc,EAAEC,QAAQC,SAAS,CACtCC,OAAQf,IAEqBgB,sBAEzBjB,EAAM,IAAIa,EAAEK,IAAIC,SAASC,eAAe,OAC5CrB,EAAcsB,OAAOC,OAAOtB,IAAK,CACjCK,OAAQ,CAAEkB,IAAKlB,EAAO,GAAImB,IAAKnB,EAAO,IACtCoB,KAAM,GACNC,WAAYjB,OAAOkB,kBAAoB,EACvCC,QAAS,CAAEC,IAAK,GAAIC,KAAM,GAAIC,OAAQ,GAAIC,MAAO,MAGnDvB,OAAOwB,iBAAiB,UAAU,kBAAMjC,EAAIkC,cAAcC,QAAQ,IAEjD,IAAItB,EAAEuB,UAAUC,SAAS,IAAIxB,EAAEuB,UAAUE,UAAUtC,IAC3Da,EAAE0B,GAAGC,GAAGC,cAAczC,EAAKD,GAKpCC,EAAIiC,iBAAiB,oBAAoB,WACvC,IAGMS,E,+uBAAIC,CAAA,CACRC,OAAQ,kBAJM5C,EAAI6C,aAOpBpC,OAAOqC,OAAOC,YAAYzC,KAAK0C,UAAUN,GAAO,IAClD,G","sources":["webpack://easy-dish-online/./script/hereMapRelocation.js"],"sourcesContent":["const apiKey = process.env.HERE_MAP_API_KEY;\n\n\n// 参考 url http://localhost:2000/hereMapRelocation.html?center=[53.14326858520508,-6.060362815856934]\nconst center = JSON.parse(getValueFromQuery('center'));\n\nloadMap();\n\n\n// 加载地图\nfunction loadMap () {\n  const platform = new H.service.Platform({\n    apikey: apiKey\n  });\n  const defaultLayers = platform.createDefaultLayers();\n\n  const map = new H.Map(document.getElementById('map'),\n    defaultLayers.vector.normal.map, {\n    center: { lat: center[0], lng: center[1] },\n    zoom: 14,\n    pixelRatio: window.devicePixelRatio || 1,\n    padding: { top: 50, left: 50, bottom: 50, right: 50 }\n  });\n\n  window.addEventListener('resize', () => map.getViewPort().resize());\n\n  const behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(map));\n  var ui = H.ui.UI.createDefault(map, defaultLayers);\n\n\n\n  // 监听地图移动\n  map.addEventListener('mapviewchangeend', function () {\n    var mapcenter = map.getCenter();\n\n    // 向外部发送当前位置\n    const data = {\n      signal: 'map_relocation',\n      ...mapcenter,\n    }\n    window.parent.postMessage(JSON.stringify(data), '*');\n  });\n}\n\n\nfunction getValueFromQuery (key) {\n  const encodeQuery = decodeURIComponent(window.location.search);\n  const match = encodeQuery.match(new RegExp('\\(\\\\\\?\\|\\&\\)' + key + '\\=\\(\\.\\+\\?\\)\\(\\&\\|\\$\\)'));\n  if (match && match[2]) {\n    return match[2]\n  }\n  return false\n}\n\n"],"names":["match","defaultLayers","map","apiKey","process","env","HERE_MAP_API_KEY","center","JSON","parse","decodeURIComponent","window","location","search","RegExp","H","service","Platform","apikey","createDefaultLayers","Map","document","getElementById","vector","normal","lat","lng","zoom","pixelRatio","devicePixelRatio","padding","top","left","bottom","right","addEventListener","getViewPort","resize","mapevents","Behavior","MapEvents","ui","UI","createDefault","data","_objectSpread","signal","getCenter","parent","postMessage","stringify"],"sourceRoot":""}